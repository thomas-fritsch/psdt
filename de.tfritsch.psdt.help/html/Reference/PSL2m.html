<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<!-- This HTML document was generated by David Burch -->
<HEAD>
    <TITLE>Postscript Level 2</TITLE>
</HEAD>
<BODY>
<H1>Postscript Operators 'm'</H1>
<HR>
<A NAME="makefont"></A>
<B>makefont</B>
<PRE>font matrix makefont font'</PRE>
<P>
applies matrix to font, producing a new font' whose characters are transformed
by matrix when they are shown. makefont first creates a copy of font. Then
it replaces the new font's FontMatrix entry with the result of concatenating
the existing FontMatrix with matrix. It inserts two additional entries,
OrigFont and ScaleMatrix, whose purpose is internal to the implementation.
Finally, it returns the result as font'.
<P>
The makefont, <A HREF="PSL2s.html#scalefont">scalefont</A>, and <A HREF="PSL2s.html#selectfont">selectfont</A>
operators produce a font dictionary derived from an original font dictionary,
but with the FontMatrix entry altered. The derived font dictionary is allocated
in local or global VM according to whether the original font dictionary
is in local or global VM. This is independent of the current VM allocation
mode.
<P>
Normally, makefont copies only the font dictionary. Subsidiary objects,
such as the CharStrings and FontInfo dictionaries, are shared with the original
font. However, if font is a composite font, makefont also copies the font
dictionaries of any descendant composite fonts. It does not copy descendant
base fonts.
<P>
Showing characters from the transformed font produces the same results as
showing from the original font after having transformed user space by the
same matrix. makefont is essentially a convenience operator that permits
the desired transformation to be encapsulated in the font description. The
most common transformation is to scale a font by a uniform factor in both
x and y. scalefont is a special case of the more general makefont and should
be used for such uniform scaling. Another operator, <A HREF="PSL2s.html#selectfont">selectfont</A>,
combines the effects of <A HREF="PSL2f.html#findfont">findfont</A> and makefont.
<P>
The interpreter keeps track of font dictionaries recently created by makefont.
Calling makefont multiple times with the same font and matrix will usually
return the same font' rather than create a new one. However, it is usually
more efficient for a PostScript language program to apply makefont only
once for each font that it needs and to keep track of the resulting font
dictionaries on its own.
<P>
<B>Example</B>
<PRE>
/Helvetica findfont [10 0 0 12 0 0] makefont setfont
</PRE>
<P>
This obtains the standard Helvetica font, which is defined with a one unit
line height, and scales it by a factor of 10 in the x dimension and 12 in
the y dimension. This produces a 12-unit high font (i.e., a 12-point font
in default user space) whose characters are &quot;condensed&quot; in the
x dimension by a ratio of 10/12.
<P>
<B><B>Errors:</B></B> <A HREF="PSL2ik.html#invalidfont">invalidfont</A>, <A HREF="PSL2qr.html#rangecheck">rangecheck</A>,
<A HREF="PSL2s.html#stackunderflow">stackunderflow</A>, <A HREF="PSL2t.html#typecheck">typecheck</A>,
<A HREF="PSL2v.html#VMerror">VMerror</A>
<P>
<B>See Also:</B> <A HREF="PSL2s.html#scalefont">scalefont</A>, <A HREF="PSL2s.html#setfont">setfont</A>,
<A HREF="PSL2f.html#findfont">findfont</A>, <A HREF="PSL2s.html#selectfont">selectfont</A>
<HR>
<A NAME="makepattern"></A>
<B>makepattern</B> LEVEL 2
<PRE>dict matrix makepattern pattern</PRE>
<P>
verifies that dict is a prototype pattern dictionary with all required key-value
pairs . It then creates a copy of dict in local VM, adding an entry, with
key Implementation, for use by the implementation. makepattern copies only
the contents of dict itself, not the values of subsidiary composite objects,
which are shared with the original dictionary.
<P>
makepattern saves a copy of the current graphics state, to be used later
when the interpreter calls the PaintProc to render the pattern cell. It
then modifies certain parameters in the saved graphics state, as follows:
<UL>
<LI> Concatenates matrix with the saved copy of the CTM.
<LI> Adjusts the resulting matrix to ensure that the device space can be tiled
properly with a pattern cell of the given size in accordance with the TilingType.
<LI> Resets the path to empty.
<LI> Replaces the clipping path by the pattern cell bounding box specified
by the BBox entry in the pattern dictionary.
<LI> Replaces the device by a special one the implementation provides.
</UL>
Finally, makepattern makes the new dictionary read-only and pushes it on
the operand stack. The resulting pattern dictionary is suitable for use
as an operand of <A HREF="PSL2s.html#setpattern">setpattern</A> or as a
&quot;color value&quot; in the Pattern color space.
<P>
<B>Errors:</B> <A HREF="PSL2l.html#limitcheck">limitcheck</A>, <A HREF="PSL2qr.html#rangecheck">rangecheck</A>,
<A HREF="PSL2s.html#stackunderflow">stackunderflow</A>, <A HREF="PSL2t.html#typecheck">typecheck</A>,
<A HREF="PSL2u.html#undefined">undefined,</A> <A HREF="PSL2v.html#VMerror">VMerror</A>
<P>
<B>See Also:</B> <A HREF="PSL2s.html#setpattern">setpattern</A>, <A HREF="PSL2f.html#findresource">findresource</A>
<HR>
<A NAME="mark"></A>
<B>mark</B>
<PRE>- mark mark</PRE>
<P>
pushes a mark (an object whose type is mark, not the mark operator itself)
on the operand stack. All marks are identical, and the operand stack may
contain any number of them at once.
<P>
The primary use of marks is to indicate the stack position of the beginning
of an indefinitely long list of operands being passed to an operator or
procedure. The <A HREF="PSL2.html#mark2">] </A>operator (array construction)
is the most common operator that works this way. It treats as operands all
elements of the stack down to a mark that was pushed by the <A HREF="PSL2.html#mark1">[
</A>operator ( <A HREF="PSL2.html#mark1">[</A> is a synonym for mark). It
is possible to define procedures that work similarly. Operators such as
counttomark and cleartomark are useful within such procedures.
<P>
<B><B>Errors:</B></B> <A HREF="PSL2s.html#stackoverflow">stackoverflow</A>
<P>
<B>See Also:</B> <A HREF="PSL2c.html#counttomark">counttomark</A>, <A HREF="PSL2c.html#cleartomark">cleartomark</A>,
<A HREF="PSL2p.html#pop">pop</A>
<HR>
<A NAME="matrix"></A>
<B>matrix</B>
<PRE>- matrix matrix</PRE>
creates a 6-element array object, fills it in with the values of an identity
matrix<PRE>
[1 0 0 1 0 0]
</PRE>
and pushes this array on the operand stack. The
array is allocated in local or global VM according to the current VM allocation
mode.
<P>
<B>Examples</B>
<PRE>
matrix               &rArr;  [1 0 0 1 0 0]
6 array identmatrix  &rArr;  [1 0 0 1 0 0]
</PRE>
<P>
The two lines in the example yield identical results.
<P>
<B><B>Errors:</B></B> <A HREF="PSL2s.html#stackoverflow">stackoverflow</A>, <A HREF="PSL2v.html#VMerror">VMerror</A>
<P>
<B>See Also:</B> <A HREF="PSL2c.html#currentmatrix">currentmatrix</A>, <A HREF="PSL2d.html#defaultmatrix">defaultmatrix</A>,
<A HREF="PSL2ik.html#initmatrix">initmatrix</A>, <A HREF="PSL2s.html#setmatrix">setmatrix</A>,
<A HREF="PSL2a.html#array">array</A>
<HR>
<A NAME="maxlength"></A>
<B>maxlength</B>
<PRE>dict maxlength int</PRE>
<P>
returns the capacity of dict-in other words, the maximum number of key-value
pairs that dict can hold using the VM currently allocated to it. In Level
1 implementations, maxlength returns the length operand of the dict operator
that created the dictionary; this is the dictionary's maximum capacity (exceeding
it causes a <A HREF="PSL2d.html#dictfull">dictfull</A> error). In a Level
2 implementation, which permits a dictionary to grow beyond its initial
capacity, maxlength returns its current capacity, a number at least as large
as that returned by length.
<P>
<B>Examples</B>
<PRE>
/mydict 5 dict def
mydict length       &rArr; 0
mydict maxlength    &rArr; 5
</PRE>
<P>
<B><B>Errors:</B></B> <A HREF="PSL2ik.html#invalidaccess">invalidaccess</A>, <A HREF="PSL2s.html#stackunderflow">stackunderflow</A>,
<A HREF="PSL2t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="PSL2l.html#length">length</A>, <A HREF="PSL2d.html#dict">dict</A>
<HR>
<A NAME="mod"></A>
<B>mod</B>
<PRE>int1 int2 mod remainder</PRE>
<P>
returns the remainder that results from dividing int1 by int2. The sign
of the result is the same as the sign of the dividend int1. Both operands
must be integers. The result is an integer.
<P>
<B>Examples</B>
<PRE>
 5 3 mod  &rArr;   2
 5 2 mod  &rArr;   1
-5 3 mod  &rArr;  -2
</PRE>
<P>
The last line of the example demonstrates that mod is a remainder operation
rather than a true modulo operation.
<P>
<B><B>Errors:</B></B> <A HREF="PSL2s.html#stackunderflow">stackunderflow</A>, <A HREF="PSL2t.html#typecheck">typecheck</A>,
<A HREF="PSL2u.html#undefinedresult">undefinedresult</A>
<P>
<B>See Also:</B> <A HREF="PSL2ik.html#idiv">idiv</A>, <A HREF="PSL2d.html#div">div</A>
<HR>
<A NAME="monitor"></A>
<B>monitor</B> DPS
<PRE>lock proc monitor</PRE>
<P>
acquires <A HREF="PSL2l.html#lock">lock</A>, first waiting if necessary
for it to become free, then executes proc, and finally releases lock again.
The release of lock occurs whether proc runs to completion or terminates
prematurely for any reason.
<P>
If <A HREF="PSL2l.html#lock">lock</A> is already held by the current context,
monitor executes an <A HREF="PSL2ik.html#invalidcontext">invalidcontext</A>
error without disturbing the <A HREF="PSL2l.html#lock">lock</A>. If the
current context has previously executed a save not yet matched by a restore
and lock is already held by another context sharing the same local VM as
the current context, an <A HREF="PSL2ik.html#invalidcontext">invalidcontext</A>
error results. These restrictions prevent the most straightforward cases
of a context deadlocking with itself.
<P>
<B><B>Errors:</B></B> <A HREF="PSL2ik.html#invalidcontext">invalidcontext</A>, <A HREF="PSL2s.html#stackunderflow">stackunderflow</A>,
<A HREF="PSL2t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="PSL2l.html#lock">lock</A>, <A HREF="PSL2f.html#fork">fork</A>,
<A HREF="PSL2w.html#wait">wait</A>
<HR>
<A NAME="moveto"></A>
<B>moveto</B>
<PRE>x y moveto -</PRE>
<P>
starts a new subpath of the current path. moveto sets the current point
in the graphics state to the user space coordinate (x, y) without adding
any line segments to the current path.
<P>
If the previous path operation in the current path was also a moveto or
<A HREF="PSL2qr.html#rmoveto">rmoveto</A>, that point is deleted from the
current path and the new moveto point replaces it.
<P>
<B>Errors:</B> <A HREF="PSL2l.html#limitcheck">limitcheck</A>, <A HREF="PSL2s.html#stackunderflow">stackunderflow</A>,
<A HREF="PSL2t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="PSL2qr.html#rmoveto">rmoveto</A>, <A HREF="PSL2l.html#lineto">lineto</A>,
<A HREF="PSL2c.html#curveto">curveto</A>, <A HREF="PSL2a.html#arc">arc</A>,
<A HREF="PSL2c.html#closepath">closepath</A>
<HR>
<A NAME="mul"></A>
<B>mul</B>
<PRE>num1 num2 mul product</PRE>
<P>
returns the product of num1 and num2. If both operands are integers and
the result is within integer range, the result is an integer. Otherwise,
the result is a real.
<P>
<B><B>Errors:</B></B> <A HREF="PSL2s.html#stackunderflow">stackunderflow</A>, <A HREF="PSL2t.html#typecheck">typecheck</A>,
<A HREF="PSL2u.html#undefinedresult">undefinedresult</A>
<P>
<B>See Also:</B> <A HREF="PSL2d.html#div">div</A>, <A HREF="PSL2ik.html#idiv">idiv</A>,
<A HREF="PSL2a.html#add">add</A>, <A HREF="PSL2s.html#sub">sub</A>, <A HREF="#mod">mod</A>
<HR>
</BODY>
</HTML>
