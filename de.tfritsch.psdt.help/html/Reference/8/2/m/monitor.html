<!DOCTYPE html>
<html>
<head>
<title>monitor</title>
</head>
<body>
	<h3>monitor [DPS]</h3>
	<pre>lock proc <b>monitor</b> -</pre>
	<p>
		acquires <a href="../l/lock.html">lock</a>, first waiting if necessary
		for it to become free, then executes <i>proc</i>, and finally releases
		lock again. The release of <i>lock</i> occurs whether <i>proc</i> runs
		to completion or terminates prematurely for any reason.
	</p>
	<p>
		If <i>lock</i> is already held by the current context, an <a
			href="../i/invalidcontext.html">invalidcontext</a> error occurs
		without disturbing the <a href="../l/lock.html">lock</a>. If the
		current context has previously executed a <a href="../s/save.html">save</a>
		not yet matched by a <a href="../r/restore.html">restore</a> and <i>lock</i>
		is already held by another context sharing the same local VM as the
		current context, an <a href="../i/invalidcontext.html">invalidcontext</a>
		error results. These restrictions prevent the most straightforward
		cases of a context deadlocking with itself.
	</p>
	<p>
		<b>Errors:</b> <a href="../i/invalidcontext.html">invalidcontext</a>,
		<a href="../s/stackunderflow.html">stackunderflow</a>, <a
			href="../t/typecheck.html">typecheck</a>
	</p>
	<p>
		<b>See Also:</b> <a href="../l/lock.html">lock</a>, <a
			href="../f/fork.html">fork</a>, <a href="../w/wait.html">wait</a>
	</p>
</body>
</html>
