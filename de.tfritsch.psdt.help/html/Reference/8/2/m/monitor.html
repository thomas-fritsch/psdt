<!DOCTYPE html>
<html>
<head>
<title>monitor</title>
</head>
<body>
	<b>monitor</b> DPS
	<pre>lock proc <b>monitor</b> -</pre>
	<p>
		acquires <a href="../l/lock.html">lock</a>, first waiting if necessary
		for it to become free, then executes proc, and finally releases lock
		again. The release of lock occurs whether proc runs to completion or
		terminates prematurely for any reason.
	</p>
	<p>
		If <a href="../l/lock.html">lock</a> is already held by the current
		context, monitor executes an <a href="../i/invalidcontext.html">invalidcontext</a>
		error without disturbing the <a href="../l/lock.html">lock</a>. If the
		current context has previously executed a save not yet matched by a
		restore and lock is already held by another context sharing the same
		local VM as the current context, an <a href="../i/invalidcontext.html">invalidcontext</a>
		error results. These restrictions prevent the most straightforward
		cases of a context deadlocking with itself.
	</p>
	<p>
		<b>Errors:</b> <a href="../i/invalidcontext.html">invalidcontext</a>,
		<a href="../s/stackunderflow.html">stackunderflow</a>, <a
			href="../t/typecheck.html">typecheck</a>
	</p>
	<p>
		<b>See Also:</b> <a href="../l/lock.html">lock</a>, <a
			href="../f/fork.html">fork</a>, <a href="../w/wait.html">wait</a>
	</p>
</body>
</html>
