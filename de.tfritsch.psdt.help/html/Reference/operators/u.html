<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<!-- This HTML document was generated by David Burch -->
<HEAD>
    <TITLE>Postscript Level 2</TITLE>
</HEAD>
<BODY>
<H1>Postscript Operators 'u'</H1>
<HR>
<A NAME="uappend"></A>
<B>uappend</B> LEVEL 2
<PRE>userpath uappend -</PRE>
<P>
interprets a user path definition and appends the result to the current
path in the graphics state.
If userpath is an ordinary user path (in other words, an array or packed
array whose length is at least 5), uappend is equivalent to:
<PRE>
systemdict begin     % Ensure standard operator meanings
  cvx exec           % Interpret userpath
end
</PRE>
<P>
If userpath is an encoded user path, uappend interprets it and performs
the encoded operations. It does not matter whether the userpath object is
literal or executable.
<P>
Note that uappend uses the standard definitions of all operator names mentioned
in the user path, unaffected by any name redefinition that may have occurred.
<P>
A ucache appearing in userpath may or may not have an effect, depending
on the environment in which uappend is executed. If the current path is
initially empty and no path construction operators are executed after uappend,
a subsequent painting operator may access the user path cache. Otherwise,
it definitely will not. This is particularly useful in the case of <A HREF="c.html#clip">clip</A>
and <A HREF="v.html#viewclip">viewclip</A>.
<P>
uappend performs a temporary adjustment to the current transformation matrix
as part of its execution. This adjustment consists of rounding the tx and
ty components of the CTM to the nearest integer values.
<P>
<B>Errors:</B> <A HREF="ik.html#invalidaccess">invalidaccess</A>, <A HREF="l.html#limitcheck">limitcheck</A>,
<A HREF="qr.html#rangecheck">rangecheck</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="#upath">upath</A>, <A HREF="#ucache">ucache</A>
<HR>
<A NAME="ucache"></A>
<B>ucache</B> LEVEL 2
<PRE>- ucache -</PRE>
<P>
notifies the PostScript interpreter that the enclosing user path is to be
retained in the cache if it is not already there. If present, this operator
must appear as the first element of a user path definition (before the mandatory
<A HREF="s.html#setbbox">setbbox</A>).
<P>
The ucache operator has no effect of its own when executed; if executed
outside a user path definition, it does nothing. It is useful only with
a user path painting operator, such as <A HREF="#ufill">ufill</A> or <A HREF="#ustroke">ustroke</A>,
that takes the user path as an operand. If the user path is not already
in the cache, the painting operator performs the path construction operations
specified in the user path and places the results (referred to as the reduced
path) in the cache. If the user path is already present in the cache, the
painting operator does not interpret the user path, but rather obtains the
reduced path from the cache.
<P>
<B>Errors:</B> (none)
<P>
<B>See Also:</B> <A HREF="#uappend">uappend</A>, <A HREF="#upath">upath</A>
<HR>
<A NAME="ucachestatus"></A>
<B>ucachestatus</B> LEVEL 2
<PRE>- ucachestatus mark bsize bmax rsize rmax blimit</PRE>
<P>
reports the current consumption and limit for two user path cache resources:
bytes of reduced path storage (bsize and bmax) and total number of cached
reduced paths (rsize and rmax).
It also reports the limit on the number of bytes occupied by a single reduced
path (blimit)-reduced paths that are larger than this are not cached. All
ucachestatus results except blimit are for information only. A PostScript
language program can change blimit (see <A HREF="s.html#setucacheparams">setucacheparams</A>).
<P>
The number of values pushed on the operand stack is variable. Future versions
of the PostScript interpreter may push additional values between mark and
bsize. The purpose of the mark is to delimit the values returned by ucachestatus.
This enables a program to determine how many values were returned (by <A HREF="c.html#counttomark">counttomark</A>)
and to discard any unused ones (by <A HREF="c.html#cleartomark">cleartomark</A>).
<P>
The bsize, bmax, and blimit parameters reported by ucachestatus are the
same as the CurUPathCache and MaxUPathCache system parameters and MaxUPathItem
user parameter reported by <A HREF="c.html#currentsystemparams">currentsystemparams</A>
and <A HREF="c.html#currentuserparams">currentuserparams</A>, respectively.
<P>
<B>Errors:</B> <A HREF="s.html#stackoverflow">stackoverflow</A>
<P>
<B>See Also:</B> <A HREF="s.html#setucacheparams">setucacheparams</A>, <A HREF="s.html#setsystemparams">setsystemparams</A>,
<A HREF="s.html#setuserparams">setuserparams</A>
<HR>
<A NAME="ueofill"></A>
<B>ueofill</B> LEVEL 2
<PRE>userpath ueofill -</PRE>
<P>
is similar to <A HREF="#ufill">ufill</A>, but does <A HREF="e.html#eofill">eofill</A>
instead of <A HREF="f.html#fill">fill</A>.
<P>
<B>Errors:</B> <A HREF="ik.html#invalidaccess">invalidaccess</A>, <A HREF="l.html#limitcheck">limitcheck</A>,
<A HREF="qr.html#rangecheck">rangecheck</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="e.html#eofill">eofill</A>, <A HREF="#ufill">ufill</A>
<HR>
<A NAME="ufill"></A>
<B>ufill</B> LEVEL 2
<PRE>userpath ufill -</PRE>
<P>
interprets a user path definition and fills the resulting path as if by
fill. The entire operation is effectively enclosed by <A HREF="gh.html#gsave">gsave</A>
and <A HREF="gh.html#grestore">grestore</A>, so ufill has no lasting
effect on the graphics state.
<P>
ufill is equivalent to:
<PRE>
gsave
  newpath
  uappend
  fill
grestore
</PRE>
<P>
<B>Errors:</B> <A HREF="ik.html#invalidaccess">invalidaccess</A>, <A HREF="l.html#limitcheck">limitcheck</A>,
<A HREF="qr.html#rangecheck">rangecheck</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> fill, <A HREF="#uappend">uappend</A>, <A HREF="#ueofill">ueofill</A>
<HR>
<A NAME="undef"></A>
<B>undef</B> LEVEL 2
<PRE>dict key undef -</PRE>
<P>
removes key and its associated value from the dictionary dict. dict does
not need to be on the dictionary stack.
No error occurs if key is not present in dict.
<P>
If the value of dict is in local VM, the effect of undef can be undone by
a subsequent restore.
That is, if key was present in dict at the time of the matching save, restore
will reinstate key and its former value.
But if dict is in global VM, the effect of undef is permanent.
<P>
<B>Errors:</B> <A HREF="ik.html#invalidaccess">invalidaccess</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="d.html#def">def</A>, <A HREF="p.html#put">put</A>,
<A HREF="#undefinefont">undefinefont</A>
<HR>
<A NAME="undefined"></A>
<B>undefined</B> (error)
<P>
A name used as a dictionary key in some context cannot be found. This occurs
if a name is looked up explicitly in a specified dictionary (<A HREF="gh.html#get">get</A>)
or in the current dictionary stack (<A HREF="l.html#load">load</A>)
and is not found. It also occurs if an executable name is encountered by
the interpreter and is not found in any dictionary on the dictionary stack.
<P>
A few PostScript operators are disabled in certain contexts-for example,
it is illegal to execute image, or operators that specify colors or set
color-related parameters in the graphics state, after a <A HREF="s.html#setcachedevice">setcachedevice</A>
or <A HREF="s.html#setcachedevice2">setcachedevice2</A> in a BuildChar
or BuildGlyph procedure. Attempting to execute such disabled operators results
in an <A HREF="#undefined">undefined</A> error.
<P>
<B>See Also:</B> <A HREF="ik.html#known">known</A>, <A HREF="w.html#where">where</A>,
<A HREF="l.html#load">load</A>, <A HREF="e.html#exec">exec</A>,
<A HREF="gh.html#get">get</A>
<HR>
<A NAME="undefinedfilename"></A>
<B>undefinedfilename</B> (error)
<P>
A file identified by a name string operand of file, run, deletefile, or
renamefile cannot be found or cannot be opened.
The undefinedfilename error also occurs if the special file %statementedit
or %lineedit is opened when the standard input file has reached end-of-file.
<HR>
<A NAME="undefinedresource"></A>
<B>undefinedresource</B> (error) LEVEL 2
<P>
A named resource instance sought by findresource cannot be found; that is,
no such instance exists either in VM or in external storage. This error
arises only in the case of findresource with a defined resource category.
If the category itself is not defined, resource operators execute the <A HREF="#undefined">undefined</A>
error.
<P>
<B>See Also:</B> <A HREF="f.html#findresource">findresource</A>
<HR>
<A NAME="undefinedresult"></A>
<B>undefinedresult</B> (error) 
<P>
A numeric computation would produce a meaningless result or one that cannot
be represented as a number. Possible causes include numeric overflow or
underflow, division by zero, or inverse transformation of a non-invertible
matrix. A large number of graphics and font operators can generate an undefinedresult
error if the CTM is not invertible (scaled by zero, for instance).
<HR>
<A NAME="undefinefont"></A>
<B>undefinefont</B> LEVEL 2
<PRE>key undefinefont -</PRE>
<P>
removes key and its associated value (a font dictionary) from the font directory,
reversing the effect of a previous <A HREF="d.html#definefont">definefont</A>.
undefinefont is a special case of the <A HREF="#undefineresource">undefineresource</A>
operator applied to the Font category.
<P>
<B>Errors:</B> <A HREF="s.html#stackunderflow">stackunderflow</A>, <A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="d.html#definefont">definefont</A>, <A HREF="#undefineresource">undefineresource</A>
<HR>
<A NAME="undefineresource"></A>
<B>undefineresource</B> LEVEL 2
<PRE>key category undefineresource -</PRE>
<P>
removes the named resource instance identified by key from the specified
category.
This undoes the effect of a previous <A HREF="d.html#defineresource">defineresource</A>.
If no such resource instance exists in VM, undefineresource does nothing;
no error occurs. However, the resource category must exist, or else an <A HREF="#undefined">undefined</A>
error occurs.
<P>
Local and global resource definitions are maintained separately; the precise
effect of undefineresource depends on the current VM allocation mode: 
<UL>
  <LI>Local-undefineresource removes a local definition if there is one.
If there is a global definition with the same key, undefineresource does
not disturb it; the global definition, formerly obscured by the local one,
now reappears.
  <LI>Global-undefineresource removes a local definition, a global definition,
or both. 
</UL>
<P>
Depending on the resource category, undefineresource may have other side
effects . However, it does not alter the resource instance in any way. If
the instance is still accessible (say, stored directly in some dictionary
or defined as a resource under another name), it can still be used in whatever
ways are appropriate. The object becomes a candidate for garbage collection
only if it is no longer accessible.
<P>
The effect of undefineresource is subject to normal VM semantics. In particular,
removal of a local resource instance can be undone by a subsequent non-nested
restore. In this case, the resource instance is not a candidate for garbage
collection.
<P>
undefineresource removes the resource instance definition from VM only.
If the resource instance also exists in external storage, it can still be
found by <A HREF="f.html#findresource">findresource</A>, <A HREF="qr.html#resourcestatus">resourcestatus</A>,
and <A HREF="qr.html#resourceforall">resourceforall</A>.
<P>
<B>Errors:</B> <A HREF="s.html#stackunderflow">stackunderflow</A>, <A HREF="t.html#typecheck">typecheck</A>,
<A HREF="#undefined">undefined</A>
<P>
<B>See Also:</B> <A HREF="d.html#defineresource">defineresource</A>, <A HREF="f.html#findresource">findresource</A>,
<A HREF="qr.html#resourcestatus">resourcestatus</A>, <A HREF="qr.html#resourceforall">resourceforall</A>
<HR>
<A NAME="undefineuserobject"></A>
<B>undefineuserobject</B> LEVEL 2
<PRE>index undefineuserobject -</PRE>
<P>
breaks the association between the non-negative integer index and an object
established by some previous execution of defineuserobject. It does so simply
by replacing the specified <A HREF="#UserObjects">UserObjects</A> array
element by the null object. This is equivalent to:
<PRE>
userdict /UserObjects get
exch null put
</PRE>
<P>
undefineuserobject does not take any other actions such as shrinking the
<A HREF="#UserObjects">UserObjects</A> array.
If index is not a valid index for the existing <A HREF="#UserObjects">UserObjects</A>
array, a <A HREF="qr.html#rangecheck">rangecheck</A> error occurs.
<P>
There is no need to execute undefineuserobject prior to executing a <A HREF="d.html#defineuserobject">defineuserobject</A>
that reuses the same index.
The purpose of undefineuserobject is to eliminate references to objects
that are no longer needed.
This may enable the garbage collector to reclaim such objects.
<P>
<B>Errors:</B> <A HREF="qr.html#rangecheck">rangecheck</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="d.html#defineuserobject">defineuserobject</A>, <A HREF="#UserObjects">UserObjects</A>
<HR>
<A NAME="unmatchedmark"></A>
<B>unmatchedmark</B> (error)
<P>
A mark object is sought on the operand stack by the <A HREF="@.html#mark1">]</A>,
<A HREF="@.html#marktwoGT">&gt;&gt;</A>, <A HREF="c.html#cleartomark">cleartomark</A>,
<A HREF="c.html#counttomark">counttomark</A>, <A HREF="f.html#fork">fork</A>,
<A HREF="s.html#setcacheparams">setcacheparams</A>, or <A HREF="s.html#setucacheparams">setucacheparams</A>
operator, but none is present.
<HR>
<A NAME="unregistered"></A>
<B>unregistered</B> (error)
<P>
An operator object has been executed for which the interpreter has no built-in
action. This represents an internal malfunction in the PostScript interpreter
and should not occur.
<HR>
<A NAME="upath"></A>
<B>upath</B> LEVEL 2
<PRE>bool upath userpath</PRE>
<P>
creates a new user path object that is equivalent to the current path in
the graphics state. upath creates a new executable array object of the appropriate
length and fills it with the operands and operators needed to describe the
current path. upath produces only an ordinary user path array, not an encoded
user path. It does not disturb the current path in the graphics state.
<P>
The bool operand specifies whether the resulting user path is to include
ucache as its first element.
<P>
Since the current path's coordinates are maintained in device space, upath
transforms them to user space using the inverse of the CTM while constructing
the user path. Applying uappend to the resulting user path will reproduce
the same current path in the graphics state, but only if the same CTM is
in effect at that time.
<P>
upath is equivalent to:
<PRE>
[
  exch {/ucache cvx} if
  pathbbox /setbbox cvx
  {/moveto cvx} {/lineto cvx} {/curveto cvx} {/closepath cvx} pathforall
] cvx
</PRE>
<P>
If charpath was used to construct any portion of the current path from a
font whose outlines are protected, upath is not allowed. Its execution will
produce an <A HREF="ik.html#invalidaccess">invalidaccess</A> error (see
<A HREF="c.html#charpath">charpath</A>).
<P>
<B>Errors:</B> <A HREF="ik.html#invalidaccess">invalidaccess</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>, <A HREF="v.html#VMerror">VMerror</A>
<P>
<B>See Also:</B> <A HREF="#uappend">uappend</A>, <A HREF="#ucache">ucache</A>,
<A HREF="p.html#pathforall">pathforall</A>
<HR>
<A NAME="userdict"></A>
<B>userdict</B>
<PRE>- userdict dict</PRE>
<P>
pushes the dictionary object userdict on the operand stack. userdict is
not an operator; it is a name in <A HREF="s.html#systemdict">systemdict</A>
associated with the dictionary object.
<P>
<B>Errors:</B> <A HREF="s.html#stackoverflow">stackoverflow</A>
<P>
<B>See Also:</B> <A HREF="s.html#systemdict">systemdict</A>, <A HREF="gh.html#globaldict">globaldict</A>,
<A HREF="e.html#errordict">errordict</A>
<HR>
<A NAME="UserObjects"></A>
<B>UserObjects</B> LEVEL 2
<PRE>- UserObjects array</PRE>
<P>
returns the current UserObjects array defined in <A HREF="#userdict">userdict</A>.
UserObjects is not an operator; it is simply a name associated with an array
in userdict. This array is created and managed by the operators <A HREF="d.html#defineuserobject">defineuserobject</A>,
<A HREF="#undefineuserobject">undefineuserobject</A>, and <A HREF="e.html#execuserobject">execuserobject</A>.
It defines a mapping from small integers (used as array indices) to arbitrary
objects (the elements of the <A HREF="a.html#array">array</A>).
<P>
The UserObjects entry in userdict is present only if defineuserobject has
been executed at least once by the current execution context or a context
that shares the same local VM. The length of the array depends on the index
operands of all previous executions of defineuserobject.
<P>
Note that defineuserobject, undefineuserobject, and execuserobject operate
on the value of UserObjects in userdict, without regard to the dictionaries
currently on the dictionary stack. Defining UserObjects in some other dictionary
on the dictionary stack changes the value returned by executing the name
object UserObjects, but does not alter the behavior of the user object operators.
<P>
Although UserObjects is an ordinary array object, it should be manipulated
only by the user object operators. Improper direct alteration of UserObjects
can subsequently cause the user object operators to malfunction.
<P>
<B>Errors:</B> <A HREF="s.html#stackoverflow">stackoverflow</A>, <A HREF="#undefined">undefined</A>
<P>
<B>See Also:</B> <A HREF="d.html#defineuserobject">defineuserobject</A>, <A HREF="#undefineuserobject">undefineuserobject</A>,
<A HREF="e.html#execuserobject">execuserobject</A>
<HR>
<A NAME="usertime"></A>
<B>usertime</B>
<PRE>- usertime int</PRE>
<P>
returns the value of a clock that increments by 1 for every millisecond
of execution by the PostScript interpreter. The value has no defined meaning
in terms of calendar time or time of day; its only use is interval timing.
The accuracy and stability of the clock depends on the environment in which
the PostScript interpreter is running. As the time value becomes greater
than the largest integer allowed in the implementation, it wraps to the
smallest (most negative) integer.
<P>
In a Display PostScript system that supports multiple execution contexts,
the value returned by usertime reports execution time on behalf of the current
context only. A context that executes usertime can subsequently execute
with reduced efficiency, because in order to perform user time accounting,
the PostScript interpreter must perform an operating system call whenever
it switches control to and from that context. Therefore, one should not
execute usertime gratuitously.
<P>
<B>Errors:</B> <A HREF="s.html#stackoverflow">stackoverflow</A>
<P>
<B>See Also:</B> <A HREF="qr.html#realtime">realtime</A>
<HR>
<A NAME="ustroke"></A>
<B>ustroke</B> LEVEL 2
<PRE>       userpath ustroke -
userpath matrix ustroke -</PRE>
<P>
interprets a user path definition and strokes the resulting path as if by
<A HREF="s.html#stroke">stroke</A>. The entire operation is effectively
enclosed by <A HREF="gh.html#gsave">gsave</A> and <A HREF="gh.html#grestore">grestore</A>,
so ustroke has no lasting effect on the graphics state
<P>
In the first form (with no matrix operand), ustroke is equivalent to:
<PRE>
gsave
  newpath
  uappend
  stroke
grestore
</PRE>
<P>
In the second form, ustroke concatenates matrix to the CTM after interpreting
userpath, but before executing stroke. The matrix applies to the line width
and the dash pattern, if any, but not to the path itself. This form of ustroke
is equivalent to:
<PRE>
gsave
  newpath
  exch uappend      % Interpret userpath
  concat           % Concat matrix to CTM
  stroke
grestore
</PRE>
<P>
The main use of the second form of ustroke is to compensate for variations
in line width and dash pattern that occur if the CTM has been scaled by
different amounts in x and y. This is accomplished by defining matrix to
be the inverse of the unequal scaling transformation.
<P>
<B>Errors:</B> <A HREF="ik.html#invalidaccess">invalidaccess</A>, <A HREF="l.html#limitcheck">limitcheck</A>,
<A HREF="qr.html#rangecheck">rangecheck</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="s.html#stroke">stroke</A>, <A HREF="#uappend">uappend</A>
<HR>
<A NAME="ustrokepath"></A>
<B>ustrokepath</B> LEVEL 2
<PRE>       userpath ustrokepath -
userpath matrix ustrokepath - </PRE>
<P>
replaces the current path with one enclosing the shape that would result
if the ustroke operator were applied to the same operands. The path resulting
from ustrokepath is suitable as the implicit operand to a subsequent <A HREF="f.html#fill">fill</A>,
<A HREF="c.html#clip">clip</A>, or <A HREF="p.html#pathbbox">pathbbox</A>.
In general, this path is not suitable for <A HREF="s.html#stroke">stroke</A>,
as it may contain interior segments or disconnected subpaths produced by
ustrokepath's stroke to outline conversion process.
<P>
In the first form, ustrokepath is equivalent to:
<PRE>
newpath
uappend
strokepath
</PRE>
<P>
In the second form, ustrokepath is equivalent to:
<PRE>
newpath
exch uappend              % Interpret userpath
matrix currentmatrix      % Save CTM
exch 
  concat                  % Concat matrix to CTM
  strokepath              % Compute outline of stroke
setmatrix                 % Restore original CTM
</PRE>
<P>
<B>Errors:</B> <A HREF="ik.html#invalidaccess">invalidaccess</A>, <A HREF="l.html#limitcheck">limitcheck</A>,
<A HREF="qr.html#rangecheck">rangecheck</A>, <A HREF="s.html#stackunderflow">stackunderflow</A>,
<A HREF="t.html#typecheck">typecheck</A>
<P>
<B>See Also:</B> <A HREF="#ustroke">ustroke</A>, <A HREF="s.html#strokepath">strokepath</A>
<HR>
</BODY>
</HTML>
