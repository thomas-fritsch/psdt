<!DOCTYPE html>
<html>
<head>
<title>Basic File Operators</title>
<link rel="stylesheet" type="text/css" href="../../format.css" />
</head>
<body>
	<h3>3.8.1 Basic File Operators</h3>
	<p>
		A PostScript <i>file object</i> represents a file. The file operators
		take a file object as an operand to read or write characters. Ignoring
		for the moment <i>how</i> a file object comes into existence, the file
		operators include the following:
	</p>
	<ul>
		<li><a href="../../8/2/r/read.html">read</a> reads the next
			character from an input file.</li>
		<li><a href="../../8/2/w/write.html">write</a> appends a
			character to an output file.</li>
		<li><a href="../../8/2/r/readstring.html">readstring</a>, <a
			href="../../8/2/r/readline.html">readline</a>, and <a
			href="../../8/2/w/writestring.html">writestring</a> transfer the
			contents of strings to and from files.</li>
		<li><a href="../../8/2/r/readhexstring.html">readhexstring</a>
			and <a href="../../8/2/w/writehexstring.html">writehexstring</a> read
			and write binary data represented in the file by hexadecimal
			notation.</li>
		<li><a href="../../8/2/t/token.html">token</a> scans characters
			from an input file according to the PostScript language syntax rules.</li>
		<li><a href="../../8/2/e/exec.html">exec</a>, applied to an input
			file, causes the PostScript interpreter to execute a PostScript
			program from that file.</li>
	</ul>
	<p>
		The operators that write to a file do not necessarily deliver the
		characters to their destination immediately. They may leave some
		characters in buffers for reasons of implementation or efficiency. The
		<a href="../../8/2/f/flush.html">flush</a> and <a
			href="../../8/2/f/flushfile.html">flushfile</a> operators deliver
		these buffered characters immediately. These operators are useful in
		certain situations, such as during two-way interactions with another
		computer or with a human user, when such data must be transmitted
		immediately.
	</p>
	<h4 id="1">Standard Input and Output Files</h4>
	<p>
		All PostScript interpreters provide a <i>standard input file</i> and a
		<i>standard output file</i>, which usually represent a real-time
		communication channel to and from another computer. The standard input
		and output files are always present; it is not necessary for a program
		to create or close them.
	</p>
	<p>
		The PostScript interpreter reads and interprets the standard input
		file as PostScript program text. It sends error and status messages to
		the standard output file. Also, a PostScript program may execute the <a
			href="../../8/2/p/print.html">print</a> operator to send arbitrary
		data to the standard output file. Note that <a
			href="../../8/2/p/print.html">print</a> is a <i>file</i> operator; it
		has nothing to do with placing text on a page or causing pages to
		emerge from a printer.
	</p>
	<p>
		It is seldom necessary for a PostScript program to deal explicitly
		with file objects for the standard files, because the PostScript
		interpreter reads the standard input file by default and the print
		operator references the standard output file implicitly. Additionally,
		the file currently being read by the PostScript interpreter is
		available via the <a href="../../8/2/c/currentfile.html">currentfile</a>
		operator; this file need not be the standard input file. However, when
		necessary, a program may apply the <a href="../../8/2/f/file.html">file</a>
		operator to the identifying strings %stdin or %stdout to obtain file
		objects for the standard input and output files; see Section <a
			href="3.html">3.8.3, "Special Files."</a>
	</p>
	<h4 id="2">End-of-Line Conventions</h4>
	<p>
		The PostScript language scanner and the <a
			href="../../8/2/r/readline.html">readline</a> operator recognize all
		three external forms of end-of-line (EOL)&mdash;CR alone, LF alone,
		and the CR-LF pair&mdash; and treat them uniformly, translating them
		as described below. The PostScript interpreter does not perform any
		such translation when reading data by other means or when writing data
		by any means.
	</p>
	<p>End-of-line sequences are recognized and treated specially in
		the following situations:</p>
	<ul>
		<li>Any of the three forms of EOL appearing in a literal string
			is converted to a single LF character in the resulting string object.
			These three examples produce identical string objects, each with an
			LF character following the second word in the string:<pre>
(any text<sup>&lt;CR&gt;</sup>some more text)
(any text<sup>&lt;LF&gt;</sup>some more text)
(any text<sup>&lt;CR&gt;&lt;LF&gt;</sup>some more text)</pre>
		</li>
		<li>Any of the three forms of EOL appearing immediately after \
			in a string is treated as a line continuation; both the \ and the EOL
			are discarded. These four examples produce identical string objects:<pre>
(any text \<sup>&lt;CR&gt;</sup>some more text)
(any text \<sup>&lt;LF&gt;</sup>some more text)
(any text \<sup>&lt;CR&gt;&lt;LF&gt;</sup>some more text)
(any text some more text)</pre>
		</li>
		<li>Any of the three forms of EOL appearing outside a string is
			treated as a single white-space character. Since the language treats
			multiple white-space characters as a single white-space character,
			the treatment of EOL is interesting only when a PostScript token is
			followed by data to be read explicitly by one of the file operators.
			The following three examples produce identical results: the operator
			reads the character x from the current input file and leaves its
			character code (the integer 120) on the stack. <pre>
currentfile read<sup>&lt;CR&gt;</sup>x
currentfile read<sup>&lt;LF&gt;</sup>
currentfile read<sup>&lt;CR&gt;&lt;LF&gt;</sup>x</pre>
		</li>
		<li>The <a href="../../8/2/r/readline.html">readline</a> operator
			treats any of the three forms of EOL as the termination condition.
		</li>
		<li>Data read by <a href="../../8/2/r/read.html">read</a> and <a
			href="../../8/2/r/readstring.html">readstring</a> does not undergo
			EOL translation: the PostScript interpreter reads whatever characters
			were received from the channel. The same is true of data written by <a
			href="../../8/2/w/write.html">write</a> and <a
			href="../../8/2/w/writestring.html">writestring</a>: whatever
			characters the interpreter provides are sent to the channel. However,
			in either case the channel itself may perform some EOL translation,
			as discussed below.
		</li>
	</ul>
	<h4 id="3">Communication Channel Behavior</h4>
	<p>
		Communications functions often usurp control characters. Control codes
		are device-dependent and not part of the PostScript language. For
		example, the serial communication protocol supported by many products
		uses the Control-D character as an end-of-file indication. In this
		case, Control-D is a communications function and not logically part of
		a PostScript program. This applies specifically to the serial channel;
		other channels, such as LocalTalk<sup>TM</sup> and Ethernet, have
		different conventions for end-of-file and other control functions. <i>In
			all cases, communication channel behavior is independent of the
			actions of the PostScript interpreter.</i>
	</p>
	<p>
		There are two levels of PostScript EOL translation: one in the
		PostScript interpreter and one in the serial communication channel.
		The previous description applies <i>only</i> to the EOL conventions at
		the level of the PostScript interpreter. The purpose of the seemingly
		redundant communication-level EOL translation is to maintain
		compatibility with diverse host operating systems and communications
		environments.
	</p>
	<p>
		As discussed in Section <a href=../2.html>3.2, "Syntax,"</a> the ASCII
		encoding of the language is designed for maximum portability. It
		avoids using control characters that might be preempted by operating
		systems or communication channels. However, there are situations in
		which transmission of arbitrary binary data is desirable. For example,
		sampled images are represented by large quantities of binary data. The
		PostScript language has an alternative binary encoding that is
		advantageous in certain situations. There are two main ways to deal
		with PostScript programs that contain binary information:
	</p>
	<ul>
		<li>Communicate with the interpreter via binary channels
			exclusively. Some channels, such as LocalTalk and Ethernet, are
			binary by nature. They do not preempt any character codes, but
			instead communicate control information separately from the data.
			Other channels, such as serial channels, may support a binary
			communication protocol that allows control characters to be quoted.
			This approach presupposes a well-controlled environment. PostScript
			programs produced in that environment may not be portable to other
			environments.</li>
		<li>Take advantage of filters for encoding binary data as ASCII
			text. Filters are a LanguageLevel 2 feature, described in Section <a
			href="4.html">3.8.4, "Filters."</a> Programs represented in this way
			do not include any control codes and are therefore portable to any
			LanguageLevel 2 or 3 interpreter in any environment.
		</li>
	</ul>
</body>
</html>
